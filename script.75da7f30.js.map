{"version":3,"sources":["util.js","constants.js","img.js","trapdoor.js","bullet.js","weapon.js","particle.js","enemies.js","crate.js","wall.js","firebarrel.js","bookshelf.js","script.js"],"names":["removeIf","arr","callback","i","length","splice","removeIfEq","elem","cb","a","remove","isCollidingCircle","x1","y1","r1","x2","y2","r2","Math","sqrt","isCollidingCircleEntities","b","x","width","y","height","radius","isCollidingRect","w1","h1","w2","h2","isCollidingRectEntities","entityCenter","entity","TILE_SIZE","images","imageProm","img","Promise","resolve","reject","addEventListener","loadImageNow","src","Image","loadImage","window","push","openTexture","require","closedTexture","Trapdoor","constructor","open","draw","c","drawImage","Bullet","vector","tag","speed","update","game","obstacle","obstacles","bullets","player","respawn","enemies","enemy","isColliding","kill","fillStyle","fillRect","gunTexture","Weapon","loaded","weapon","texture","Particle","vy","vx","size","color","floor","random","particles","Enemy","_game","centerX","centerY","particle","calculateCollisions","canvas","cracheadTexture","Crachead","dist","direction_vector","obs","gunguyTexture","GuyThatShootsYou","reload","weapons","crateTexture","Crate","wallTexture","Wall","barrelTexture","FireBarrel","bookshelfTexture","Bookshelf","document","getElementById","getContext","imageSmoothingEnabled","win","PUNCH_COOL_DOWN","playerFront","playerFrontWalking","playerBack","playerRightWalking","playerLeftWalking","Player","maxSpeed","punchCoolDown","keydown","LEFT","RIGHT","UP","DOWN","newObstacles","levels","currentLevel","entranceX","entranceY","shouldPickUp","left","right","up","down","calculateCursorCoords","punch","cursorX","cursorY","shoot","calculateVector","xDist","yDist","ratio","e","playerX","playerY","offsetX","offsetY","code","mouseX","mouseY","distance","event","fist","gun","drawCursor","endscreenImage","prespeed","beginPath","arc","PI","fill","requestAnimationFrame","Gamestate","layout","forEach","row","type","console","error","loop","setTimeout","_","f","w","t","h","g","titleImage","explainImage","then","titleImgLoaded","startImage","listener","explainImgLoaded","removeEventListener","startGame","all"],"mappings":";;;;;;ACAO,MAAMmC,SAAS,GAAG,EAAlB;AUAP,APAA,AIAA,ADAA,AGAA,AJAA,AMAA,ATAA,AMAA,AJAA;AHAO,MAAMC,MAAM,GAAG,EAAf;ASCP,APMA,AINA,ADAA,AGAA,AJCO,AMDP,ATAA,AHDO,ASCP,AJCA,MCAa4C,ADAPL,GLFU3E,KMET,CAAe,CDAN,CLFT,CAAkBC,CKEN,ELFZ,EAAuBC,QAAvB,EAAiC,MKEXgD,OAAO,CAAC,qBAAD,CAAjB,CAAnB;ACCEG,ANFA,EMEAA,INFIlD,CAAC,GAAG,CAAR,EMEW,CAACmB,CAAD,EAAIE,CAAJ,EAAO;AKApB,APMO,AINP,ADDA,AGCA,ARDA,AIEI,AMFJ,ATCA,AMAA,AJCO,MMDDsF,APMOpD,AINP8C,AEAAI,ARDAvE,ACCAY,AMAAyD,AJCO9B,GCAJtD,CAAL,EFKG,ACLA,CDKa,AELPA,ADAO,CCAhB,CJFW,ECCE,AMAA,CDAC,ANDAgB,CQCC,CPAC,AMAA,CDAC,ANDA,CSCC,ADAA,GCAG,ATAvB,IAAIC,OAAJ,CAAY,CAACC,ECAeU,AMAAA,CDACA,CEACA,GCAGA,ATArB,EAAUT,ACAa,AMAA,CDAC,ALAA,AMAA,CDAC,AEAA,CAAC,ECAE,CAAC,ATA7B,KAAqB,MOAE,CAAjB,CDAkB,ACAtC,CDAqB,CAArB,AEAuC,CAAjB,CAAtB,EPAqC,CAAjB,CQAsB,ARA1C,CQAyB,CAAzB;APOEY,AFNEf,AICA,AHDJ,AHFE,AKGAe,EDKAA,AFNEf,AGCFe,GHDK,CAACX,ACAFS,GGCG3B,ANHArB,CMGL,ANHM,GIQG,AELAqB,ANHAvB,AKGA,CDKCqB,AELV,ADAUA,CDKD,ACLA,CLHG,CIQCE,AJRApB,AKGAoB,CDKJ,ACLA,CFDM,CCMCmC,ACLAkB,EHDhB,ACAkB,CDAG,AFFvB,EAAuB,CIQZ,ACLA,EDKejB,ACLAkB,CHDxB,EEMS,AFNoB,EEMA,CCLC,GHDKtC,AGCF,KFDLU,AECnB,EHDiC,AGCF,CHDGZ,GAAD,CAA1C,ACAmC,CAAC,0BAAD,CAAjB,CAAtB;AQCO,APMH,AING,ADEP,AGFO,ARAHA,AIEA,AMJJ,AZAI,ASEG,AJCH,EHDAA,GAAG,CSAMyE,AHAAN,AEAAI,ARALnE,AOAKiE,ETFLzG,CIQCoB,AEJA2D,ADDA3D,CDKL,AKNG,AJCH,CGDG,AFEH,AGFc,CDAC,CJMNA,ACLAA,CDKT,AEJU,ADDV,CMDG,CAAgB,ADAhB,AVFS,CUEQ,AJEpB,ANJarB,GAAG,CAACE,CEEjB,AFFgB,CEEK,AFFT,EAASA,CAAT,CAAZ,EAAyB,CEEzB,EAA8B,MAAMsC,MAAM,EAA1C;ASCFY,APME,AINFA,AEAAA,ARAC,AIEC,AHFG,AHFDpD,ASEJoD,AJCE,CHJF,CSGAA,AHAAA,AEAAA,ARJF,AOIEA,INAWD,AHFPnD,GIQGuB,AEJA0D,ANJA,AKGA1D,CDKL,AJRMnB,AKGN,CCCA,EKFS,APMAmB,AINA,AEAA,ADAA,AJCAA,CMDCF,APMV,AINUA,AEAAA,AJEA,AHFP,AMAOA,AJCV,CMDS,AHAA,AEAA,AJET,AHFkB,AMAT,CTFP,CWEWE,AHAAA,AEAAA,AVFArB,ASEAqB,CEAJ,AHAA,AEAA,AVFP,ASEO,EEAO,AHAA,AEAA,AVFA,ASEA,CTFd;AWGF,APMA,AINA,ADCJ,AGDI,AJEA,AMLJ,ATGE6B,AHFG,ASED,AJCA,EFDFA,GHJE,IWIK9B,APMAG,AINAH,AEAAA,AJEA4D,AGFA5D,AJCAsD,ELHE,EMIP,AHFS,CQAT,AHAA,AEAA,APAUvD,AMAV,CLMA,ADNS,AECT,CCCY,CKFC,AHAA,AEAAa,AJEb,AHFaX,AMAAW,CLMC,ADNL,AECK0C,CDKd,CDNgB,CQAC1C,AHAAA,GHCjB,aKDA,ADAA,IEAA,AHAA;AGCA,APMA,AINA,AEAA,ARAG,AIEH,AHFA,AHFE,ASEF,AJCA,QLHIhC,CWECsB,APMAF,AINAE,AEAAA,ARAOkB,AIEPyC,AHFA9D,AHFH,ASEGG,AJCAA,CFDL,GAASH,CCMT,AEJA,AHFA,CQAA,AHAA,AEAA,ADAA,AJCA,EDKa,AEHX,CKHYa,APMd,AINc,AEAAA,ADAA,AJCA,CAAd,EHDG,CMAeA,ANAOS,AOAPT,GPAf,EAA2B,CIGjBjB,IAAI,CAACmE,KKHlB,ADAA,AJGa,CAAWnE,GEHxB,ACAA,CHG4B,CAACoE,MAAL,KAAgB,GAA3B,IAAkC,GAA7C,IAAoD,cADtD;AKDA,APMA,AINA,ADAJ,AGAI,ARAF,AIGC,AMPH,ATII,AHFC,ASED,AJCA,QHDIhD,CSAChB,APMAG,AINAH,AEAAA,APAAE,AMAAF,AJCAC,CMDL,AHAA,AEAA,APAA,AMAA,CPAO,ESAED,AHAAA,AEAAA,APAAE,AMAAF,CEAT,AHAA,AEAA,ARAU,ACAV,AMAA,AJCA,CDKA,ECLa,CDKC,AFNAuB,CEMd,ACLA,IHDU,EAAZ;ASCE,APMA,AINA,AEAA,ARAFP,ACAE,AHFD,ASEC,AJCA,EHDFA,GAAG,CAACM,GSAGpB,APMAmC,AINAnC,AEAAA,ARAP,ACAOC,AMAAD,AJCAE,CMDL,AHAA,AEAA,ADAA,EPAQkB,CSACpB,AHAAA,AEAAA,ADAAA,CEAT,AHAA,AEAA,ADAA,CLMA,AFNF,ACAE,AECA,GDKcmC,ADNAxB,AECA,CAAd,KDKA,cDNA;AQCA,APMA,AINA,ADAG,AGAH,ARAF,AIGAoB,AMFF,ATDI,AHFH,ASEG,AJCA,ECEFA,ICHWiC,ADGP,CAAChC,CAAD,CKHGuB,APMAlB,AINAkB,AEAAA,ARAA1C,ACAAd,AMAAwD,AJCAA,CCEC,CCHH,CAAY,EHMf,ADNA,EQAA,AHAA,AEAA,ADAA,AJCA,CDKa,ADNA5C,CDAC,CSAC2E,APMf,AINeN,AEAAI,ARAAtE,AOAAoE,AJCA/B,GHDD,CAAhB,MGCE,CIDA,CDAA,CEAA,GCAA,ERAA;AQCD,APMC,AIND,ADADtB,AGAC,ARAF,AIGGG,AHHA,AMAD,AJCC,EEDFH,EDGEG,CAAC,CAACiB,GFGGb,ADNAN,AECAwB,GDKL,CGNS,AJAT,CIAUxD,CHMCsC,AGNF,ADGT,ADFA,CFDY,CIACpC,CHMb,AGNS,ADGK,ADFAsD,EEDE,CJAhB,EGGmBM,CDFnB,ICEA;AFID,AGNC,ADGA5B,AMHJ,ATAG,AHFI,AKGJ,ICECA,CAAC,CAACkB,GCHGpD,APFOhB,COEZ,GAASgB,CAAT,ADGA,CAAW,INLR,CMKaA,ANLOrB,CMKvB,EAAmB,ANLhB,EAAyBM,GMKJiB,CAAxB,ANLG,EMKwB,ANLOhB,EAA/B,EAAmC,CMKN2E,IAAhC,EAAsC,KAAKA,IAA3C;AKFF5B,AHAAA,ADAE,AGAFA,ARAK,AIGJ,ANLDvD,ASEAuD,EEAAA,AHAAA,AEAAA,AVFAvD,ASEAuD,IEAI,AHAA,AEAA,ADAA,CEACC,AHAAA,AEAAA,ADAAA,CEAD,AHAA,AEAA,ADAA,CFAGhC,ALAOsB,CSAN,AHAA,ADAN,AGAM,AVFA,ASEA,CTFC7C,EOEEuB,CAAT,APFM,EAAMf,CAAC,CEEV,CAAmBmC,EFFL,CEEd,EAAwB;ASC3BY,APMFM,AINEN,ADAA,AGAAA,ARAF,AUDF,ATCED,AHFE,ASEAC,AJCFD,EDKAO,ADNAP,AECAA,EMDEC,AHAAA,AEAAA,ADAAA,CEAC,AHAA,AEAA,ADAA,CEACC,AHAAA,AEAAA,APAA,AMAAA,AJCA,CFDCD,AECAA,CDKC,AFNAlB,ACAF,AECA,CDKGyB,AGNAxC,CJAC,AHFAb,AKGA,CHDC,EEMH,CGNJ,ALAU,CSAV,APMW,AINX,AEAA,ADAA,CEAY,AHAA,AEAA,AVFA,ASEA,CFAC,CLACmC,CKAd,APFepC,CAAC,CWECsE,AHAAA,AEAAA,ADAAA,EPAP,EAAZ,AFFuBxE,GWErB,AHAA,AEAA,ADAA,CTFA,CWE0B,AHAA,AEAA,ADAA,KEAKe,AHAAA,AEAAA,ADAAA,CEA/B,AHAA,AEAA,ADAA,EEAkC,AHAA,AEAA,ADAA,KEAKE,AHAAA,AEAAA,ADAAA,CEAvC,AHAA,AEAA,ADAA,EEA0C,AHAA,AEAA,ADAA,KEAKD,AHAAA,AEAAA,ADAAA,KEA/C,AHAA,AEAA,ADAA,EEAsD,AHAA,AEAA,ADAA,KEAKE,AHAAA,AEAAA,ADAAA,MEA3D,AHAA,AEAA,ADAA,EEDM,ADAA,ADAA,CEEN,ADAA,ADAA;AECA,APKA,AIND,ADAC,AGCA,ARDFa,AIEAwB,AHFE,AHFA,ASGA,AJAAN,EHDFlB,AIEAwB,EDDEN,CHDC,AGCA,CHDCZ,AGCAa,ECCE,AHFA,AHFA/C,CIQCY,AGNAG,ALAP,AIEOsC,CFIL,EFNQ,CIEJ,AHFKT,CCMC,AJRA,COEV,ADEW,ADDX,CAAY,CFDZ,CIAc,APFA9C,CIQCmD,ADNA,CIAf,APFA,CKGiBoB,CLHCvE,EAAE,CIQV,CAAY,CAAZ,CCLV,EAA0B,CDKC,ICLIc,CDKCuC,ACLhC,EAAkC,GDKlC,ECLuCrC,CAAvC,EAA0C,KAAKD,KAA/C,EAAsD,KAAKE,MAA3D,GHDF,CAF6B,CAG7B;ASCC,APKC,AGNA,AGCD,AJCC,AMJJ,ATEM+B,AHFF,ASGD,MNDGA,CAAC,CAACC,CCMCjC,AGNAE,ADEAwD,CFIL,CEJA,ANJOxE,GIQG,AEJAQ,CCFV,EJAE,AHFF,COEc,ADEA,AHFA+B,CCMCU,AEJA2B,CCFf,KHMU,AEJA,CFIY,CAAZ,EDNR,CGEwB,CFIC,AEJjB,AHFiB,GGEG,CAA9B,CFIgCzB,ADNAvC,CAA9B,EAAiC,ECMnC,GDNwCE,CAAtC,EAAyC,KAAKC,MAA9C,EAAsD,KAAKF,KAA3D;AKZa,ADaf,ALAFwB,AIEE,AHFC,AHFF,AKEC,EHAFA,CFNQ,CAAR,CGIE,GDEI,AGAA,CEACgC,ALAArC,AIEAuC,EAAL,AHFO,EEAEJ,CCEC3D,ECFV,EDEc,CCFC,ADEAoE,ADFf,EAAiB,EEAjB,ELAF,AIEY,CJFY,IIEI,CAA1B,CJFF,EAAgC,MAAM;ASbjB,APmBnB,AGLD,AGdqB,ARcpBhD,AIEA,AMLJ,ATGMkB,AHFL,ASZiB,AJcZA,IHAFlB,ECAEkB,AEAAA,CHAC,ACAA,AEAA,CHACZ,ACAAa,AEAAgB,CDKC,AEHAU,EJFL,EIEA,CJFUvC,CEKCoB,EFLX,AIEa9C,AHFX,AEAA,CFAYiC,EEAE,CCEC,CAACmC,CFGlB,IAAuBvB,CEHV,GFGc,ADLzB,CCK0BE,CEHC,AHFA,CGE7B,IHFkC3C,CAAhC,AEAA,EDKF,ADLqC,ECKE,GDLGE,CAAxC,EAA2C,KAAKC,MAAhD,EAAwD,KAAKF,KAA7D;ACMA,AFLFa,ACAC,AEACoB,IHAFpB,EGAEoB,CAAC,CAACkB,EDMA,AFNE,CAAC1B,CEMDgB,GFNN,CAAY3B,AGAV,CAAW,GDMC,ECNIf,CAAL,EHAQ,CAACgB,AGAA,CAApB,EHAmB,AGAI,CHAzB,EEM0Bc,ECNI5B,CAAL,GAAS,CAAhC,EAAmC,EAAnC,EAAu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","file":"script.75da7f30.js","sourceRoot":"..","sourcesContent":["export function removeIf(arr, callback) {\n  var i = 0;\n  while (i < arr.length) {\n    if (callback(arr[i], i)) {\n      arr.splice(i, 1);\n    } else {\n      ++i;\n    }\n  }\n}\n\nexport function removeIfEq(arr, elem, cb) {\n  removeIf(arr, a => {\n    const remove = a === elem;\n    if (remove && cb) cb();\n    return remove;\n  });\n}\n\nexport const isCollidingCircle = (x1, y1, r1, x2, y2, r2) =>\n  Math.sqrt((x2 - x1) ** 2 + (y2 - y1) ** 2) <= r1 + r2;\n\nexport const isCollidingCircleEntities = (a, b) =>\n  isCollidingCircle(\n    a.x + a.width / 2,\n    a.y + a.height / 2,\n    a.radius,\n    b.x + b.width / 2,\n    b.y + b.height / 2,\n    b.radius\n  );\n\nexport const isCollidingRect = (x1, y1, w1, h1, x2, y2, w2, h2) =>\n  x1 + w1 > x2 && y1 + h1 > y2 && x1 < x2 + w2 && y1 < y2 + h2;\n\nexport const isCollidingRectEntities = (a, b) =>\n  isCollidingRect(a.x, a.y, a.width, a.height, b.x, b.y, b.width, b.height);\n\nexport const entityCenter = entity => [\n  entity.x + entity.width / 2,\n  entity.y + entity.height / 2\n];\n","export const TILE_SIZE = 42;\n","export const images = [];\n\nconst imageProm = img =>\n  new Promise((resolve, reject) => {\n    img.addEventListener(\"load\", () => resolve(img));\n    img.addEventListener(\"error\", () => reject());\n  });\n\nexport function loadImageNow(src) {\n  const img = new Image();\n  img.src = src;\n  return imageProm(img);\n}\n\nexport function loadImage(src) {\n  const img = new Image();\n  img.src = \"data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=\";\n  // once everything on the page is loaded and ready we can start loading assets\n  window.addEventListener(\"load\", () => {\n    img.src = src;\n    images.push(imageProm(img));\n  });\n  return img;\n}\n","import { TILE_SIZE } from \"./constants.js\";\nimport { loadImage } from \"./img.js\";\n\nconst openTexture = loadImage(require(\"./art/trapdooropen.png\"));\nconst closedTexture = loadImage(require(\"./art/trapdoorclosed.png\"));\n\nexport class Trapdoor {\n  constructor(x, y) {\n    this.x = x;\n    this.y = y;\n    this.height = TILE_SIZE;\n    this.width = TILE_SIZE;\n    this.open = false;\n  }\n\n  draw(c) {\n    if (this.open) {\n      c.drawImage(openTexture, this.x, this.y, this.height, this.width);\n    } else {\n      c.drawImage(closedTexture, this.x, this.y, this.height, this.width);\n    }\n  }\n}\n","import {\n  isCollidingCircleEntities,\n  removeIf,\n  isCollidingRectEntities,\n  removeIfEq\n} from \"./util.js\";\n\nimport { Trapdoor } from \"./trapdoor.js\";\n\nexport class Bullet {\n  constructor(x, y, vector, tag) {\n    this.x = x;\n    this.y = y;\n    this.radius = 2;\n    this.width = 4;\n    this.height = 4;\n    this.vector = vector;\n    this.speed = 10;\n    this.tag = tag;\n  }\n\n  update(game) {\n    this.x += this.vector[0] * this.speed;\n    this.y += this.vector[1] * this.speed;\n    for (const obstacle of game.obstacles) {\n      if (\n        !(obstacle instanceof Trapdoor) &&\n        isCollidingRectEntities(this, obstacle)\n      ) {\n        removeIfEq(game.bullets, this);\n        return;\n      }\n    }\n\n    if (this.tag == \"enemy\") {\n      if (isCollidingCircleEntities(this, game.player)) {\n        game.player.respawn();\n      }\n    }\n    if (this.tag == \"player\") {\n      removeIf(game.enemies, enemy => {\n        const isColliding = isCollidingCircleEntities(this, enemy);\n        if (isColliding) {\n          enemy.kill(game);\n          removeIfEq(game.bullets, this);\n        }\n        return isColliding;\n      });\n    }\n  }\n\n  draw(c) {\n    c.fillStyle = \"grey\";\n    c.fillRect(this.x, this.y, this.width, this.height);\n  }\n}\n","import { loadImage } from \"./img.js\";\n\nconst gunTexture = loadImage(require(\"./art/itsthegun.png\"));\n\nexport class Weapon {\n  constructor(x, y, loaded, weapon = \"gun\") {\n    this.x = x;\n    this.y = y;\n    this.loaded = loaded;\n    this.height = 4;\n    this.width = 16;\n    this.radius = 8;\n    this.texture = gunTexture;\n    this.weapon = weapon;\n  }\n\n  draw(c) {\n    c.drawImage(this.texture, this.x, this.y, this.width, this.height);\n    if (this.loaded) {\n      c.fillStyle = \"rgba(0, 0, 0, .5)\";\n      c.fillRect(this.x - 6, this.y - 6, 12, 12);\n    }\n  }\n}\n","import { removeIfEq } from \"./util.js\";\n\nexport class Particle {\n  constructor(x, y) {\n    this.x = x;\n    this.y = y;\n\n    this.vy = 2.5;\n    this.vx = 0;\n    this.size = 5;\n    this.color =\n      \"rgba(\" + (Math.floor(Math.random() * 100) + 155) + \", 50, 30, 1)\";\n  }\n\n  draw(c) {\n    c.fillStyle = this.color;\n    c.fillRect(this.x, this.y, this.size, this.size);\n  }\n  update(game) {\n    this.vx = Math.random() * 4 - 2;\n    this.vy = Math.random() + 2;\n    this.size -= Math.random() / 5;\n\n    if (this.size <= 0) {\n      removeIfEq(game.particles, this);\n      return;\n    }\n\n    this.x += this.vx;\n    this.y += this.vy;\n  }\n}\n","import { Bullet } from \"./bullet.js\";\nimport { Trapdoor } from \"./trapdoor.js\";\nimport {\n  isCollidingRectEntities,\n  entityCenter,\n  isCollidingCircleEntities\n} from \"./util.js\";\nimport { Weapon } from \"./weapon.js\";\nimport { Particle } from \"./particle.js\";\nimport { loadImage } from \"./img.js\";\n\nexport class Enemy {\n  constructor(x, y) {\n    this.x = x;\n    this.y = y;\n    this.width = 32;\n    this.height = 32;\n    this.radius = 16;\n    this.texture = null;\n  }\n\n  update(_game) {}\n\n  kill(game) {\n    const [centerX, centerY] = entityCenter(this);\n    const particle = () => {\n      game.particles.push(\n        new Particle(\n          centerX + (Math.random() - 1) * this.width,\n          centerY + (Math.random() - 1) * this.height\n        )\n      );\n    };\n    particle();\n    particle();\n    particle();\n    particle();\n    particle();\n    particle();\n  }\n\n  draw(c) {\n    c.drawImage(this.texture, this.x, this.y, this.width, this.height);\n    //c.fillStyle = \"brown\";\n    //c.fillRect(this.x, this.y, this.width, this.height);\n  }\n\n  calculateCollisions() {\n    if (this.y < 0) {\n      this.y = 0;\n      this.vy = 0;\n    }\n    if (this.y + this.height > canvas.height) {\n      this.y = canvas.height - this.height;\n      this.vy = 0;\n    }\n    if (this.x < 0) {\n      this.x = 0;\n      this.vx = 0;\n    }\n    if (this.x + this.width > canvas.width) {\n      this.x = canvas.width - this.width;\n      this.vx = 0;\n    }\n  }\n}\n\nconst cracheadTexture = loadImage(require(\"./art/crackhead.png\"));\n\nexport class Crachead extends Enemy {\n  constructor(x, y) {\n    super(x, y);\n    this.texture = cracheadTexture;\n  }\n\n  update(game) {\n    var dist = Math.sqrt(\n      (game.player.x - this.x) ** 2 + (game.player.y - this.y) ** 2\n    );\n    var direction_vector = [\n      (game.player.x - this.x) / dist,\n      (game.player.y - this.y) / dist\n    ];\n\n    this.x += direction_vector[0] * 4;\n\n    for (const obs of game.obstacles) {\n      if (!(obs instanceof Trapdoor) && isCollidingRectEntities(this, obs)) {\n        this.x -= direction_vector[0] * 4;\n        this.vx = 0;\n      }\n    }\n\n    this.y += direction_vector[1] * 4;\n\n    for (const obs of game.obstacles) {\n      if (!(obs instanceof Trapdoor) && isCollidingRectEntities(this, obs)) {\n        this.y -= direction_vector[1] * 4;\n        this.vy = 0;\n      }\n    }\n\n    if (isCollidingCircleEntities(this, game.player)) {\n      game.player.respawn();\n    }\n  }\n}\n\nconst gunguyTexture = loadImage(require(\"./art/gunguy.png\"));\n\nexport class GuyThatShootsYou extends Enemy {\n  constructor(x, y) {\n    super(x, y);\n    this.texture = gunguyTexture;\n    this.reload = 10;\n  }\n\n  kill(game) {\n    const [centerX, centerY] = entityCenter(this);\n    game.weapons.push(\n      new Weapon(centerX - this.width / 4, centerY - this.height / 4, true)\n    );\n    super.kill(game);\n  }\n\n  update(game) {\n    this.reload -= 1;\n    var dist = Math.sqrt(\n      (game.player.x - this.x) ** 2 + (game.player.y - this.y) ** 2\n    );\n    var direction_vector = [\n      (game.player.x - this.x) / dist,\n      (game.player.y - this.y) / dist\n    ];\n    if (this.reload <= 0) {\n      game.bullets.push(\n        new Bullet(\n          this.x + this.width / 2,\n          this.y + this.height / 2,\n          direction_vector,\n          \"enemy\"\n        )\n      );\n      this.reload = 25;\n    }\n  }\n}\n","import { TILE_SIZE } from \"./constants.js\";\nimport { loadImage } from \"./img.js\";\n\nconst crateTexture = loadImage(require(\"./art/crate.png\"));\n\nexport class Crate {\n  constructor(x, y) {\n    this.width = 3 * TILE_SIZE;\n    this.height = 3 * TILE_SIZE;\n    this.x = x;\n    this.y = y;\n    this.texture = crateTexture;\n  }\n\n  draw(c) {\n    c.drawImage(this.texture, this.x, this.y, this.width, this.height);\n  }\n}\n","import { TILE_SIZE } from \"./constants.js\";\nimport { loadImage } from \"./img.js\";\n\nconst wallTexture = loadImage(require(\"./art/wall.png\"));\n\nexport class Wall {\n  constructor(x, y) {\n    this.width = TILE_SIZE;\n    this.height = 3 * TILE_SIZE;\n    this.x = x;\n    this.y = y;\n    this.texture = wallTexture;\n  }\n\n  draw(c) {\n    c.drawImage(this.texture, this.x, this.y, this.width, this.height);\n    //c.fillStyle = \"#999\";\n    ///c.fillRect(this.x, this.y, this.width, this.height);\n  }\n}\n","import { TILE_SIZE } from \"./constants.js\";\nimport { loadImage } from \"./img.js\";\n\nconst barrelTexture = loadImage(require(\"./art/barrel.png\"));\n\nexport class FireBarrel {\n  constructor(x, y) {\n    this.width = TILE_SIZE;\n    this.height = TILE_SIZE;\n    this.x = x;\n    this.y = y;\n    this.texture = barrelTexture;\n  }\n\n  draw(c) {\n    c.drawImage(this.texture, this.x, this.y, this.width, this.height);\n    //c.fillStyle = \"orange\";\n    //c.fillRect(this.x, this.y, this.width, this.height);\n  }\n}\n","import { TILE_SIZE } from \"./constants.js\";\nimport { loadImage } from \"./img.js\";\n\nconst bookshelfTexture = loadImage(require(\"./art/bookshelf.png\"));\n\nexport class Bookshelf {\n  constructor(x, y) {\n    this.width = 4 * TILE_SIZE;\n    this.height = TILE_SIZE;\n    this.x = x;\n    this.y = y;\n    this.texture = bookshelfTexture;\n  }\n\n  draw(c) {\n    c.drawImage(this.texture, this.x, this.y, this.width, this.height);\n    //c.fillStyle = \"brown\";\n    //c.fillRect(this.x, this.y, this.width, this.height);\n  }\n}\n","import { Crachead, GuyThatShootsYou } from \"./enemies.js\";\nimport { Crate } from \"./crate.js\";\nimport { Wall } from \"./wall.js\";\nimport { FireBarrel } from \"./firebarrel.js\";\nimport { Bookshelf } from \"./bookshelf.js\";\nimport {\n  removeIf,\n  isCollidingCircle,\n  isCollidingCircleEntities,\n  isCollidingRectEntities,\n  entityCenter\n} from \"./util.js\";\nimport { Weapon } from \"./weapon.js\";\nimport { Bullet } from \"./bullet.js\";\nimport { TILE_SIZE } from \"./constants.js\";\nimport { Trapdoor } from \"./trapdoor.js\";\nimport { images, loadImageNow, loadImage } from \"./img.js\";\n\nvar canvas = document.getElementById(\"canvas\");\n/** @type {CanvasRenderingContext2D} */\nvar c = canvas.getContext(\"2d\");\n\nc.imageSmoothingEnabled = false;\n\nlet win = false;\n\nconst PUNCH_COOL_DOWN = 50;\n\nconst playerFront = loadImage(require(\"./art/frozoefront.png\"));\nconst playerFrontWalking = loadImage(require(\"./art/frozonefronttwalk.gif\"));\nconst playerBack = loadImage(require(\"./art/frozoneback.png\"));\nconst playerRightWalking = loadImage(require(\"./art/frorightwalk.gif\"));\nconst playerLeftWalking = loadImage(require(\"./art/froleftwalk.gif\"));\n\nclass Player {\n  constructor() {\n    this.x = canvas.width / 3;\n    this.y = canvas.height / 3;\n    this.vx = 0;\n    this.vy = 0;\n    this.width = 32;\n    this.height = 32;\n    this.radius = 16;\n    this.weapon = \"fist\";\n    this.maxSpeed = 4;\n    this.punchCoolDown = PUNCH_COOL_DOWN;\n    this.texture = playerFront;\n\n    this.keydown = {\n      LEFT: false,\n      RIGHT: false,\n      UP: false,\n      DOWN: false\n    };\n  }\n\n  draw() {\n    c.drawImage(this.texture, this.x, this.y, this.width, this.height);\n  }\n\n  respawn() {\n    game.enemies = [];\n    game.weapons = [];\n    game.bullets = [];\n    game.particles = [];\n    game.newObstacles(game.levels[game.currentLevel]);\n    this.x = game.entranceX;\n    this.y = game.entranceY;\n    this.vx = 0;\n    this.vy = 0;\n  }\n\n  calculateCollisions() {\n    if (this.weapon != \"gun\") {\n      removeIf(game.weapons, weapon => {\n        const shouldPickUp =\n          weapon.loaded && isCollidingCircleEntities(this, weapon);\n        if (shouldPickUp) {\n          this.weapon = weapon.weapon;\n        }\n        return shouldPickUp;\n      });\n    }\n\n    for (const obs of game.obstacles) {\n      if (obs instanceof Trapdoor) {\n        if (game.enemies.length === 0) {\n          obs.open = true;\n        }\n        if (obs.open && isCollidingRectEntities(this, obs)) {\n          game.currentLevel++;\n          if (game.currentLevel > game.levels.length - 1) {\n            win = true;\n            return;\n          }\n          game.newObstacles(game.levels[game.currentLevel]);\n          this.respawn();\n          return;\n        }\n      }\n    }\n    if (this.y < 0) {\n      this.y = 0;\n      this.vy = 0;\n    } else if (this.y + this.height > canvas.height) {\n      this.y = canvas.height - this.height;\n      this.vy = 0;\n    }\n    if (this.x < 0) {\n      this.x = 0;\n      this.vx = 0;\n    } else if (this.x + this.width > canvas.width) {\n      this.x = canvas.width - this.width;\n      this.vx = 0;\n    }\n  }\n\n  update() {\n    this.punchCoolDown++;\n\n    if (this.keydown.LEFT && !this.keydown.RIGHT) {\n      this.left();\n    } else if (this.keydown.RIGHT && !this.keydown.LEFT) {\n      this.right();\n    } else {\n      this.vx *= 0.7;\n    }\n\n    if (\n      (this.keydown.RIGHT || this.keydown.LEFT) &&\n      (this.keydown.UP || this.keydown.DOWN)\n    ) {\n      this.maxSpeed = 2.828;\n    } else {\n      this.maxSpeed = 4;\n    }\n\n    if (this.keydown.UP && !this.keydown.DOWN) {\n      this.up();\n    } else if (this.keydown.DOWN && !this.keydown.UP) {\n      this.down();\n    } else {\n      this.vy *= 0.7;\n    }\n\n    this.x += this.vx;\n\n    for (const obs of game.obstacles) {\n      if (!(obs instanceof Trapdoor) && isCollidingRectEntities(this, obs)) {\n        this.x -= this.vx;\n        this.vx = 0;\n      }\n    }\n\n    this.y += this.vy;\n\n    for (const obs of game.obstacles) {\n      if (!(obs instanceof Trapdoor) && isCollidingRectEntities(this, obs)) {\n        this.y -= this.vy;\n        this.vy = 0;\n      }\n    }\n\n    this.calculateCollisions();\n    calculateCursorCoords();\n  }\n\n  left() {\n    if (this.vx > -this.maxSpeed) {\n      this.vx -= 1;\n    } else {\n      this.vx = -this.maxSpeed;\n    }\n    this.texture = playerLeftWalking;\n  }\n\n  right() {\n    if (this.vx < this.maxSpeed) {\n      this.vx += 1;\n    } else {\n      this.vx = this.maxSpeed;\n    }\n    this.texture = playerRightWalking;\n  }\n\n  up() {\n    if (this.vy > -this.maxSpeed) {\n      this.vy -= 1;\n    } else {\n      this.vy = -this.maxSpeed;\n    }\n    this.texture = playerBack;\n  }\n\n  down() {\n    if (this.vy < this.maxSpeed) {\n      this.vy += 1;\n    } else {\n      this.vy = this.maxSpeed;\n    }\n    this.texture = playerFrontWalking;\n  }\n\n  punch() {\n    removeIf(game.enemies, enemy => {\n      const isColliding = isCollidingCircle(\n        cursorX,\n        cursorY,\n        32,\n        enemy.x,\n        enemy.y,\n        enemy.radius\n      );\n      if (isColliding) enemy.kill(game);\n      return isColliding;\n    });\n  }\n\n  shoot(vector) {\n    const [centerX, centerY] = entityCenter(this);\n    game.bullets.push(new Bullet(centerX, centerY, vector, \"player\"));\n    this.weapon = \"fist\";\n    game.weapons.push(\n      new Weapon(centerX - this.width / 4, centerY - this.height / 4, false)\n    );\n  }\n}\n\nexport function calculateVector(x1, y1, x2, y2) {\n  const xDist = x2 - x1;\n  const yDist = y2 - y1;\n  const ratio = 1 / Math.sqrt(xDist ** 2 + yDist ** 2);\n  return [xDist * ratio, yDist * ratio];\n}\n\ncanvas.addEventListener(\"click\", function(e) {\n  if (game.player.weapon === \"fist\") {\n    if (game.player.punchCoolDown > PUNCH_COOL_DOWN) {\n      game.player.punch();\n      game.player.punchCoolDown = 0;\n    }\n  } else {\n    const [playerX, playerY] = entityCenter(game.player);\n    const vector = calculateVector(playerX, playerY, e.offsetX, e.offsetY);\n    game.player.shoot(vector);\n  }\n});\n\ndocument.addEventListener(\"keydown\", function(e) {\n  switch (e.code) {\n    case \"KeyA\":\n    case \"ArrowLeft\":\n      game.player.keydown.LEFT = true;\n      break;\n\n    case \"KeyW\":\n    case \"ArrowUp\":\n      game.player.keydown.UP = true;\n      break;\n\n    case \"KeyD\":\n    case \"ArrowRight\":\n      game.player.keydown.RIGHT = true;\n      break;\n\n    case \"KeyS\":\n    case \"ArrowDown\":\n      game.player.keydown.DOWN = true;\n      break;\n\n    default:\n      return;\n  }\n});\n\ndocument.addEventListener(\"keyup\", function(e) {\n  switch (e.code) {\n    case \"KeyA\":\n    case \"ArrowLeft\":\n      game.player.keydown.LEFT = false;\n      break;\n\n    case \"KeyW\":\n    case \"ArrowUp\":\n      game.player.keydown.UP = false;\n      break;\n\n    case \"KeyD\":\n    case \"ArrowRight\":\n      game.player.keydown.RIGHT = false;\n      break;\n\n    case \"KeyS\":\n    case \"ArrowDown\":\n      game.player.keydown.DOWN = false;\n      break;\n\n    default:\n  }\n});\n\nlet cursorX = 0;\nlet cursorY = 0;\n\nfunction calculateCursorCoords() {\n  if (game.player.weapon === \"fist\") {\n    const [playerX, playerY] = entityCenter(game.player);\n    const xDist = mouseX - playerX;\n    const yDist = mouseY - playerY;\n    const distance = Math.sqrt(xDist ** 2 + yDist ** 2);\n    if (distance > 64) {\n      const ratio = 64 / distance;\n      cursorX = playerX + xDist * ratio;\n      cursorY = playerY + yDist * ratio;\n      return;\n    }\n  }\n  cursorX = mouseX;\n  cursorY = mouseY;\n}\n\nlet mouseX = 0;\nlet mouseY = 0;\n\ncanvas.addEventListener(\"mousemove\", event => {\n  mouseX = event.offsetX;\n  mouseY = event.offsetY;\n  calculateCursorCoords();\n});\n\nconst fist = loadImage(require(\"./art/itsafist.png\"));\nconst gun = loadImage(require(\"./art/itsthegun.png\"));\n/** @param {CanvasRenderingContext2D} c */\nfunction drawCursor(c) {\n  if (game.player.weapon === \"fist\") {\n    c.drawImage(fist, cursorX - 6, cursorY - 6, 12, 12);\n    if (game.player.punchCoolDown < PUNCH_COOL_DOWN) {\n      c.fillStyle = \"rgba(0, 0, 0, .5)\";\n      c.fillRect(cursorX - 6, cursorY - 6, 12, 12);\n    }\n  } else {\n    c.drawImage(gun, cursorX - 8, cursorY - 2, 16, 4);\n  }\n}\n\nconst endscreenImage = loadImage(require(\"./art/endscreen.jpg\"));\n\nfunction draw() {\n  if (win) {\n    c.drawImage(endscreenImage, 0, 0, canvas.width, canvas.height);\n    return;\n  }\n\n  game.player.update();\n\n  const prespeed =\n    Math.sqrt(\n      game.player.vx * game.player.vx + game.player.vy * game.player.vy\n    ) + 0.5;\n\n  game.speed = 120 / prespeed;\n\n  c.fillStyle = `rgba(0, 0, 0, ${(1 / game.speed) * 15})`;\n  c.fillRect(0, 0, canvas.width, canvas.height);\n\n  for (const entity of [\n    ...game.obstacles,\n    ...game.weapons,\n    ...game.enemies,\n    ...game.bullets,\n    ...game.particles\n  ]) {\n    entity.draw(c);\n  }\n\n  game.player.draw(c);\n\n  if (game.player.weapon === \"fist\") {\n    c.beginPath();\n    c.fillStyle = \"darkred\";\n    c.arc(mouseX, mouseY, 5, 0, 2 * Math.PI);\n    c.fill();\n  }\n\n  drawCursor(c);\n\n  requestAnimationFrame(draw);\n}\n\nclass Gamestate {\n  constructor() {\n    this.player = new Player();\n    this.speed = 1;\n    this.currentLevel = 0;\n    this.enemies = [];\n    this.obstacles = [];\n    this.weapons = [];\n    this.bullets = [];\n    this.particles = [];\n    this.levels = [];\n    this.entranceX = 0;\n    this.entranceY = 0;\n  }\n\n  newObstacles(layout) {\n    this.obstacles = [];\n\n    layout.forEach((row, y) => {\n      row.forEach(([type, entity], x) => {\n        switch (type) {\n          case \"noop\":\n            break;\n          case \"entrance\":\n            this.entranceX = x * TILE_SIZE;\n            this.entranceY = y * TILE_SIZE;\n            break;\n          case \"enemy\":\n            this.enemies.push(new entity(x * TILE_SIZE, y * TILE_SIZE));\n            break;\n          case \"obstacle\":\n            this.obstacles.push(new entity(x * TILE_SIZE, y * TILE_SIZE));\n            break;\n          default:\n            console.error(\"unknown map entity type:\", type);\n        }\n      });\n    });\n  }\n\n  update() {\n    for (const entity of [\n      ...this.enemies,\n      ...this.bullets,\n      ...this.particles\n    ]) {\n      if (entity.update) entity.update(game);\n    }\n  }\n  loop() {\n    if (win) return;\n    game.update();\n    setTimeout(game.loop, game.speed);\n  }\n}\n\nconst game = new Gamestate();\n\nwindow.game = game;\n\ngame.weapons.push(new Weapon(64, 64, true));\n\n{\n  // new scope so we don't accidentally use these one-off variables\n  const _ = [\"noop\"];\n  const e = [\"entrance\"];\n  const c = [\"obstacle\", Crate];\n  const b = [\"obstacle\", Bookshelf];\n  const f = [\"obstacle\", FireBarrel];\n  const w = [\"obstacle\", Wall];\n  const t = [\"obstacle\", Trapdoor];\n  const h = [\"enemy\", Crachead];\n  const g = [\"enemy\", GuyThatShootsYou];\n\n  game.levels.push(\n    [\n      [h, _, _, _, w, _, _, _, _, _, _, _],\n      [_, _, _, _, _, _, _, _, _, _, _, _],\n      [_, _, _, _, _, _, _, _, _, _, _, _],\n      [_, _, _, _, _, _, _, _, _, _, _, _],\n      [_, _, _, _, e, _, _, _, _, _, _, _],\n      [c, _, _, _, _, _, f, _, _, _, t, _],\n      [_, _, _, _, _, _, _, _, _, _, _, _],\n      [_, _, _, _, _, _, _, _, _, _, _, _],\n      [_, _, _, _, _, _, _, _, _, _, _, _],\n      [_, _, _, _, _, _, _, b, _, _, _, _],\n      [_, _, _, _, _, _, _, _, _, _, _, _],\n      [_, _, _, _, _, _, _, _, _, _, _, _]\n    ],\n\n    [\n      [_, _, _, _, w, _, _, _, _, _, _, _],\n      [_, _, _, _, _, _, _, _, _, g, _, _],\n      [_, _, f, _, _, _, _, _, _, _, _, _],\n      [_, _, _, _, w, _, c, _, _, _, _, _],\n      [e, _, _, _, _, _, _, _, _, _, _, _],\n      [_, _, _, _, _, _, _, _, _, _, _, _],\n      [_, _, _, _, _, _, _, _, _, _, _, _],\n      [_, _, _, _, _, _, _, _, _, _, _, t],\n      [_, _, _, _, _, _, _, _, _, _, _, _],\n      [_, _, _, _, w, _, h, g, _, f, _, _],\n      [_, _, h, _, _, _, _, _, _, _, _, _],\n      [_, _, _, _, _, _, _, _, _, _, _, _]\n    ],\n\n    [\n      [_, _, _, _, _, _, _, _, _, _, _, _],\n      [_, g, _, _, _, _, _, _, _, _, g, _],\n      [_, _, c, _, _, _, _, c, _, _, _, _],\n      [_, _, _, _, _, _, _, _, _, _, _, _],\n      [t, _, _, _, _, _, _, _, _, _, _, _],\n      [_, _, _, _, _, h, h, _, _, _, _, _],\n      [_, _, _, _, _, h, h, _, _, _, _, _],\n      [_, _, c, _, _, _, _, c, _, _, _, e],\n      [_, _, _, _, _, _, _, _, _, _, _, _],\n      [_, _, _, _, _, _, _, _, _, _, _, _],\n      [_, g, _, _, _, _, _, _, _, _, _, _],\n      [_, _, _, _, _, _, _, _, _, _, _, _]\n    ],\n\n    [\n      [_, _, _, _, f, _, _, _, _, _, _, _],\n      [_, _, _, _, _, _, _, _, _, g, _, _],\n      [_, _, _, w, b, _, _, _, _, _, _, _],\n      [_, _, h, _, _, _, _, _, _, _, _, _],\n      [e, _, _, _, _, _, _, _, _, _, _, _],\n      [_, _, _, w, _, _, _, h, _, _, g, _],\n      [_, _, h, _, _, _, _, _, _, _, _, _],\n      [_, _, _, _, _, _, _, _, _, f, _, t],\n      [_, _, _, _, _, _, _, _, _, _, _, _],\n      [_, f, _, _, _, _, _, g, _, _, _, _],\n      [_, _, _, _, _, _, _, _, _, _, _, _],\n      [_, _, _, _, _, _, _, _, _, _, _, _]\n    ],\n\n    [\n      [_, _, _, _, _, _, _, _, _, _, _, _],\n      [_, _, _, _, _, _, _, _, _, _, _, _],\n      [_, _, _, _, _, _, _, _, _, _, _, _],\n      [_, _, _, h, h, h, h, h, h, _, _, _],\n      [t, _, _, h, _, _, _, _, h, _, _, _],\n      [_, _, _, h, _, f, f, _, h, _, _, _],\n      [_, _, _, h, _, f, f, _, h, _, _, _],\n      [_, _, _, h, _, _, _, _, h, _, _, e],\n      [_, _, _, h, h, h, h, h, h, _, _, _],\n      [_, _, _, _, _, _, _, _, _, _, _, _],\n      [_, _, _, _, _, _, _, _, _, _, _, _],\n      [_, _, _, _, _, _, _, _, _, _, _, _]\n    ],\n\n    [\n      [c, _, _, c, _, _, c, _, _, c, _, _],\n      [_, _, _, _, _, _, _, _, _, _, _, _],\n      [_, _, _, _, _, _, _, _, _, _, _, _],\n      [b, _, _, _, b, _, _, _, b, _, _, _],\n      [e, _, _, _, _, _, _, _, _, _, _, _],\n      [_, _, _, _, h, h, h, h, h, _, g, _],\n      [_, _, _, _, h, h, h, h, h, g, _, _],\n      [_, _, _, _, _, _, _, _, _, _, _, t],\n      [b, _, _, _, b, _, _, _, b, _, _, _],\n      [c, _, _, c, _, _, c, _, _, c, _, _],\n      [_, _, _, _, _, _, _, _, _, _, _, _],\n      [_, _, _, _, _, _, _, _, _, _, _, _]\n    ]\n  );\n}\n\nconst titleImage = loadImageNow(require(\"./art/title.jpg\"));\nconst explainImage = loadImageNow(require(\"./art/explain.jpg\"));\n\ntitleImage.then(titleImgLoaded => {\n  let startImage = \"title\";\n  c.drawImage(titleImgLoaded, 0, 0, canvas.width, canvas.height);\n\n  canvas.addEventListener(\"click\", async function listener() {\n    switch (startImage) {\n      case \"title\":\n        startImage = \"explain\";\n        const explainImgLoaded = await explainImage;\n        c.drawImage(explainImgLoaded, 0, 0, canvas.width, canvas.height);\n        break;\n      case \"explain\":\n        canvas.removeEventListener(\"click\", listener);\n        await startGame();\n        break;\n    }\n  });\n});\n\nasync function startGame() {\n  await Promise.all(images);\n  requestAnimationFrame(draw);\n  game.loop();\n  game.player.respawn();\n}\n"]}