{"version":3,"sources":["util.js","constants.js","img.js","trapdoor.js","bullet.js","weapon.js","particle.js","enemies.js","crate.js","wall.js","firebarrel.js","bookshelf.js","script.js","node_modules/parcel/src/builtins/hmr-runtime.js"],"names":["removeIf","arr","callback","i","length","splice","removeIfEq","elem","cb","a","remove","isCollidingCircle","x1","y1","r1","x2","y2","r2","Math","sqrt","isCollidingCircleEntities","b","x","width","y","height","radius","isCollidingRect","w1","h1","w2","h2","isCollidingRectEntities","entityCenter","entity","TILE_SIZE","images","imageProm","img","Promise","resolve","reject","addEventListener","loadImageNow","src","Image","loadImage","window","push","openTexture","require","closedTexture","Trapdoor","constructor","open","draw","c","drawImage","Bullet","vector","tag","speed","update","game","obstacle","obstacles","bullets","player","respawn","enemies","enemy","isColliding","kill","fillStyle","fillRect","gunTexture","Weapon","loaded","weapon","texture","Particle","vy","vx","size","color","floor","random","particles","Enemy","_game","centerX","centerY","particle","calculateCollisions","canvas","cracheadTexture","Crachead","dist","direction_vector","obs","gunguyTexture","GuyThatShootsYou","reload","weapons","crateTexture","Crate","wallTexture","Wall","barrelTexture","FireBarrel","bookshelfTexture","Bookshelf","document","getElementById","getContext","imageSmoothingEnabled","win","PUNCH_COOL_DOWN","playerFront","playerFrontWalking","playerBack","playerRightWalking","playerLeftWalking","Player","maxSpeed","punchCoolDown","keydown","LEFT","RIGHT","UP","DOWN","newObstacles","levels","currentLevel","entranceX","entranceY","shouldPickUp","left","right","up","down","calculateCursorCoords","punch","cursorX","cursorY","shoot","calculateVector","xDist","yDist","ratio","e","playerX","playerY","offsetX","offsetY","code","mouseX","mouseY","distance","event","fist","gun","drawCursor","endscreenImage","prespeed","beginPath","arc","PI","fill","requestAnimationFrame","Gamestate","layout","forEach","row","type","console","error","loop","setTimeout","_","f","w","t","h","g","titleImage","explainImage","then","titleImgLoaded","startImage","listener","explainImgLoaded","removeEventListener","startGame","all","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","call","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","JSON","parse","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","id","every","generated","js","clear","hmrApply","v","hmrAcceptRun","close","onclose","log","removeErrorOverlay","message","stack","overlay","createErrorOverlay","body","appendChild","createElement","stackTrace","innerText","innerHTML","getParents","modules","parents","k","d","dep","Array","isArray","concat","Function","deps","cached","cache","some"],"mappings":"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","file":"script.75da7f30.js","sourceRoot":"..","sourcesContent":["export function removeIf(arr, callback) {\n  var i = 0;\n  while (i < arr.length) {\n    if (callback(arr[i], i)) {\n      arr.splice(i, 1);\n    } else {\n      ++i;\n    }\n  }\n}\n\nexport function removeIfEq(arr, elem, cb) {\n  removeIf(arr, a => {\n    const remove = a === elem;\n    if (remove && cb) cb();\n    return remove;\n  });\n}\n\nexport const isCollidingCircle = (x1, y1, r1, x2, y2, r2) =>\n  Math.sqrt((x2 - x1) ** 2 + (y2 - y1) ** 2) <= r1 + r2;\n\nexport const isCollidingCircleEntities = (a, b) =>\n  isCollidingCircle(\n    a.x + a.width / 2,\n    a.y + a.height / 2,\n    a.radius,\n    b.x + b.width / 2,\n    b.y + b.height / 2,\n    b.radius\n  );\n\nexport const isCollidingRect = (x1, y1, w1, h1, x2, y2, w2, h2) =>\n  x1 + w1 > x2 && y1 + h1 > y2 && x1 < x2 + w2 && y1 < y2 + h2;\n\nexport const isCollidingRectEntities = (a, b) =>\n  isCollidingRect(a.x, a.y, a.width, a.height, b.x, b.y, b.width, b.height);\n\nexport const entityCenter = entity => [\n  entity.x + entity.width / 2,\n  entity.y + entity.height / 2\n];\n","export const TILE_SIZE = 42;\n","export const images = [];\n\nconst imageProm = img =>\n  new Promise((resolve, reject) => {\n    img.addEventListener(\"load\", () => resolve(img));\n    img.addEventListener(\"error\", () => reject());\n  });\n\nexport function loadImageNow(src) {\n  const img = new Image();\n  img.src = src;\n  return imageProm(img);\n}\n\nexport function loadImage(src) {\n  const img = new Image();\n  img.src = \"data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=\";\n  // once everything on the page is loaded and ready we can start loading assets\n  window.addEventListener(\"load\", () => {\n    img.src = src;\n    images.push(imageProm(img));\n  });\n  return img;\n}\n","import { TILE_SIZE } from \"./constants.js\";\nimport { loadImage } from \"./img.js\";\n\nconst openTexture = loadImage(require(\"./art/trapdooropen.png\"));\nconst closedTexture = loadImage(require(\"./art/trapdoorclosed.png\"));\n\nexport class Trapdoor {\n  constructor(x, y) {\n    this.x = x;\n    this.y = y;\n    this.height = TILE_SIZE;\n    this.width = TILE_SIZE;\n    this.open = false;\n  }\n\n  draw(c) {\n    if (this.open) {\n      c.drawImage(openTexture, this.x, this.y, this.height, this.width);\n    } else {\n      c.drawImage(closedTexture, this.x, this.y, this.height, this.width);\n    }\n  }\n}\n","import {\n  isCollidingCircleEntities,\n  removeIf,\n  isCollidingRectEntities,\n  removeIfEq\n} from \"./util.js\";\n\nimport { Trapdoor } from \"./trapdoor.js\";\n\nexport class Bullet {\n  constructor(x, y, vector, tag) {\n    this.x = x;\n    this.y = y;\n    this.radius = 2;\n    this.width = 4;\n    this.height = 4;\n    this.vector = vector;\n    this.speed = 10;\n    this.tag = tag;\n  }\n\n  update(game) {\n    this.x += this.vector[0] * this.speed;\n    this.y += this.vector[1] * this.speed;\n    for (const obstacle of game.obstacles) {\n      if (\n        !(obstacle instanceof Trapdoor) &&\n        isCollidingRectEntities(this, obstacle)\n      ) {\n        removeIfEq(game.bullets, this);\n        return;\n      }\n    }\n\n    if (this.tag == \"enemy\") {\n      if (isCollidingCircleEntities(this, game.player)) {\n        game.player.respawn();\n      }\n    }\n    if (this.tag == \"player\") {\n      removeIf(game.enemies, enemy => {\n        const isColliding = isCollidingCircleEntities(this, enemy);\n        if (isColliding) {\n          enemy.kill(game);\n          removeIfEq(game.bullets, this);\n        }\n        return isColliding;\n      });\n    }\n  }\n\n  draw(c) {\n    c.fillStyle = \"grey\";\n    c.fillRect(this.x, this.y, this.width, this.height);\n  }\n}\n","import { loadImage } from \"./img.js\";\n\nconst gunTexture = loadImage(require(\"./art/itsthegun.png\"));\n\nexport class Weapon {\n  constructor(x, y, loaded, weapon = \"gun\") {\n    this.x = x;\n    this.y = y;\n    this.loaded = loaded;\n    this.height = 4;\n    this.width = 16;\n    this.radius = 8;\n    this.texture = gunTexture;\n    this.weapon = weapon;\n  }\n\n  draw(c) {\n    c.drawImage(this.texture, this.x, this.y, this.width, this.height);\n    if (this.loaded) {\n      c.fillStyle = \"rgba(0, 0, 0, .5)\";\n      c.fillRect(this.x - 6, this.y - 6, 12, 12);\n    }\n  }\n}\n","import { removeIfEq } from \"./util.js\";\n\nexport class Particle {\n  constructor(x, y) {\n    this.x = x;\n    this.y = y;\n\n    this.vy = 2.5;\n    this.vx = 0;\n    this.size = 5;\n    this.color =\n      \"rgba(\" + (Math.floor(Math.random() * 100) + 155) + \", 50, 30, 1)\";\n  }\n\n  draw(c) {\n    c.fillStyle = this.color;\n    c.fillRect(this.x, this.y, this.size, this.size);\n  }\n  update(game) {\n    this.vx = Math.random() * 4 - 2;\n    this.vy = Math.random() + 2;\n    this.size -= Math.random() / 5;\n\n    if (this.size <= 0) {\n      removeIfEq(game.particles, this);\n      return;\n    }\n\n    this.x += this.vx;\n    this.y += this.vy;\n  }\n}\n","import { Bullet } from \"./bullet.js\";\nimport { Trapdoor } from \"./trapdoor.js\";\nimport {\n  isCollidingRectEntities,\n  entityCenter,\n  isCollidingCircleEntities\n} from \"./util.js\";\nimport { Weapon } from \"./weapon.js\";\nimport { Particle } from \"./particle.js\";\nimport { loadImage } from \"./img.js\";\n\nexport class Enemy {\n  constructor(x, y) {\n    this.x = x;\n    this.y = y;\n    this.width = 32;\n    this.height = 32;\n    this.radius = 16;\n    this.texture = null;\n  }\n\n  update(_game) {}\n\n  kill(game) {\n    const [centerX, centerY] = entityCenter(this);\n    const particle = () => {\n      game.particles.push(\n        new Particle(\n          centerX + (Math.random() - 1) * this.width,\n          centerY + (Math.random() - 1) * this.height\n        )\n      );\n    };\n    particle();\n    particle();\n    particle();\n    particle();\n    particle();\n    particle();\n  }\n\n  draw(c) {\n    c.drawImage(this.texture, this.x, this.y, this.width, this.height);\n    //c.fillStyle = \"brown\";\n    //c.fillRect(this.x, this.y, this.width, this.height);\n  }\n\n  calculateCollisions() {\n    if (this.y < 0) {\n      this.y = 0;\n      this.vy = 0;\n    }\n    if (this.y + this.height > canvas.height) {\n      this.y = canvas.height - this.height;\n      this.vy = 0;\n    }\n    if (this.x < 0) {\n      this.x = 0;\n      this.vx = 0;\n    }\n    if (this.x + this.width > canvas.width) {\n      this.x = canvas.width - this.width;\n      this.vx = 0;\n    }\n  }\n}\n\nconst cracheadTexture = loadImage(require(\"./art/crackhead.png\"));\n\nexport class Crachead extends Enemy {\n  constructor(x, y) {\n    super(x, y);\n    this.texture = cracheadTexture;\n  }\n\n  update(game) {\n    var dist = Math.sqrt(\n      (game.player.x - this.x) ** 2 + (game.player.y - this.y) ** 2\n    );\n    var direction_vector = [\n      (game.player.x - this.x) / dist,\n      (game.player.y - this.y) / dist\n    ];\n\n    this.x += direction_vector[0] * 4;\n\n    for (const obs of game.obstacles) {\n      if (!(obs instanceof Trapdoor) && isCollidingRectEntities(this, obs)) {\n        this.x -= direction_vector[0] * 4;\n        this.vx = 0;\n      }\n    }\n\n    this.y += direction_vector[1] * 4;\n\n    for (const obs of game.obstacles) {\n      if (!(obs instanceof Trapdoor) && isCollidingRectEntities(this, obs)) {\n        this.y -= direction_vector[1] * 4;\n        this.vy = 0;\n      }\n    }\n\n    if (isCollidingCircleEntities(this, game.player)) {\n      game.player.respawn();\n    }\n  }\n}\n\nconst gunguyTexture = loadImage(require(\"./art/gunguy.png\"));\n\nexport class GuyThatShootsYou extends Enemy {\n  constructor(x, y) {\n    super(x, y);\n    this.texture = gunguyTexture;\n    this.reload = 10;\n  }\n\n  kill(game) {\n    const [centerX, centerY] = entityCenter(this);\n    game.weapons.push(\n      new Weapon(centerX - this.width / 4, centerY - this.height / 4, true)\n    );\n    super.kill(game);\n  }\n\n  update(game) {\n    this.reload -= 1;\n    var dist = Math.sqrt(\n      (game.player.x - this.x) ** 2 + (game.player.y - this.y) ** 2\n    );\n    var direction_vector = [\n      (game.player.x - this.x) / dist,\n      (game.player.y - this.y) / dist\n    ];\n    if (this.reload <= 0) {\n      game.bullets.push(\n        new Bullet(\n          this.x + this.width / 2,\n          this.y + this.height / 2,\n          direction_vector,\n          \"enemy\"\n        )\n      );\n      this.reload = 25;\n    }\n  }\n}\n","import { TILE_SIZE } from \"./constants.js\";\nimport { loadImage } from \"./img.js\";\n\nconst crateTexture = loadImage(require(\"./art/crate.png\"));\n\nexport class Crate {\n  constructor(x, y) {\n    this.width = 3 * TILE_SIZE;\n    this.height = 3 * TILE_SIZE;\n    this.x = x;\n    this.y = y;\n    this.texture = crateTexture;\n  }\n\n  draw(c) {\n    c.drawImage(this.texture, this.x, this.y, this.width, this.height);\n  }\n}\n","import { TILE_SIZE } from \"./constants.js\";\nimport { loadImage } from \"./img.js\";\n\nconst wallTexture = loadImage(require(\"./art/wall.png\"));\n\nexport class Wall {\n  constructor(x, y) {\n    this.width = TILE_SIZE;\n    this.height = 3 * TILE_SIZE;\n    this.x = x;\n    this.y = y;\n    this.texture = wallTexture;\n  }\n\n  draw(c) {\n    c.drawImage(this.texture, this.x, this.y, this.width, this.height);\n    //c.fillStyle = \"#999\";\n    ///c.fillRect(this.x, this.y, this.width, this.height);\n  }\n}\n","import { TILE_SIZE } from \"./constants.js\";\nimport { loadImage } from \"./img.js\";\n\nconst barrelTexture = loadImage(require(\"./art/barrel.png\"));\n\nexport class FireBarrel {\n  constructor(x, y) {\n    this.width = TILE_SIZE;\n    this.height = TILE_SIZE;\n    this.x = x;\n    this.y = y;\n    this.texture = barrelTexture;\n  }\n\n  draw(c) {\n    c.drawImage(this.texture, this.x, this.y, this.width, this.height);\n    //c.fillStyle = \"orange\";\n    //c.fillRect(this.x, this.y, this.width, this.height);\n  }\n}\n","import { TILE_SIZE } from \"./constants.js\";\nimport { loadImage } from \"./img.js\";\n\nconst bookshelfTexture = loadImage(require(\"./art/bookshelf.png\"));\n\nexport class Bookshelf {\n  constructor(x, y) {\n    this.width = 4 * TILE_SIZE;\n    this.height = TILE_SIZE;\n    this.x = x;\n    this.y = y;\n    this.texture = bookshelfTexture;\n  }\n\n  draw(c) {\n    c.drawImage(this.texture, this.x, this.y, this.width, this.height);\n    //c.fillStyle = \"brown\";\n    //c.fillRect(this.x, this.y, this.width, this.height);\n  }\n}\n","import { Crachead, GuyThatShootsYou } from \"./enemies.js\";\nimport { Crate } from \"./crate.js\";\nimport { Wall } from \"./wall.js\";\nimport { FireBarrel } from \"./firebarrel.js\";\nimport { Bookshelf } from \"./bookshelf.js\";\nimport {\n  removeIf,\n  isCollidingCircle,\n  isCollidingCircleEntities,\n  isCollidingRectEntities,\n  entityCenter\n} from \"./util.js\";\nimport { Weapon } from \"./weapon.js\";\nimport { Bullet } from \"./bullet.js\";\nimport { TILE_SIZE } from \"./constants.js\";\nimport { Trapdoor } from \"./trapdoor.js\";\nimport { images, loadImageNow, loadImage } from \"./img.js\";\n\nvar canvas = document.getElementById(\"canvas\");\n/** @type {CanvasRenderingContext2D} */\nvar c = canvas.getContext(\"2d\");\n\nc.imageSmoothingEnabled = false;\n\nlet win = false;\n\nconst PUNCH_COOL_DOWN = 50;\n\nconst playerFront = loadImage(require(\"./art/frozoefront.png\"));\nconst playerFrontWalking = loadImage(require(\"./art/frozonefronttwalk.gif\"));\nconst playerBack = loadImage(require(\"./art/frozoneback.png\"));\nconst playerRightWalking = loadImage(require(\"./art/frorightwalk.gif\"));\nconst playerLeftWalking = loadImage(require(\"./art/froleftwalk.gif\"));\n\nclass Player {\n  constructor() {\n    this.x = canvas.width / 3;\n    this.y = canvas.height / 3;\n    this.vx = 0;\n    this.vy = 0;\n    this.width = 32;\n    this.height = 32;\n    this.radius = 16;\n    this.weapon = \"fist\";\n    this.maxSpeed = 4;\n    this.punchCoolDown = PUNCH_COOL_DOWN;\n    this.texture = playerFront;\n\n    this.keydown = {\n      LEFT: false,\n      RIGHT: false,\n      UP: false,\n      DOWN: false\n    };\n  }\n\n  draw() {\n    c.drawImage(this.texture, this.x, this.y, this.width, this.height);\n  }\n\n  respawn() {\n    game.enemies = [];\n    game.weapons = [];\n    game.bullets = [];\n    game.particles = [];\n    game.newObstacles(game.levels[game.currentLevel]);\n    this.x = game.entranceX;\n    this.y = game.entranceY;\n    this.vx = 0;\n    this.vy = 0;\n  }\n\n  calculateCollisions() {\n    if (this.weapon != \"gun\") {\n      removeIf(game.weapons, weapon => {\n        const shouldPickUp =\n          weapon.loaded && isCollidingCircleEntities(this, weapon);\n        if (shouldPickUp) {\n          this.weapon = weapon.weapon;\n        }\n        return shouldPickUp;\n      });\n    }\n\n    for (const obs of game.obstacles) {\n      if (obs instanceof Trapdoor) {\n        if (game.enemies.length === 0) {\n          obs.open = true;\n        }\n        if (obs.open && isCollidingRectEntities(this, obs)) {\n          game.currentLevel++;\n          if (game.currentLevel > game.levels.length - 1) {\n            win = true;\n            return;\n          }\n          game.newObstacles(game.levels[game.currentLevel]);\n          this.respawn();\n          return;\n        }\n      }\n    }\n    if (this.y < 0) {\n      this.y = 0;\n      this.vy = 0;\n    } else if (this.y + this.height > canvas.height) {\n      this.y = canvas.height - this.height;\n      this.vy = 0;\n    }\n    if (this.x < 0) {\n      this.x = 0;\n      this.vx = 0;\n    } else if (this.x + this.width > canvas.width) {\n      this.x = canvas.width - this.width;\n      this.vx = 0;\n    }\n  }\n\n  update() {\n    this.punchCoolDown++;\n\n    if (this.keydown.LEFT && !this.keydown.RIGHT) {\n      this.left();\n    } else if (this.keydown.RIGHT && !this.keydown.LEFT) {\n      this.right();\n    } else {\n      this.vx *= 0.7;\n    }\n\n    if (\n      (this.keydown.RIGHT || this.keydown.LEFT) &&\n      (this.keydown.UP || this.keydown.DOWN)\n    ) {\n      this.maxSpeed = 2.828;\n    } else {\n      this.maxSpeed = 4;\n    }\n\n    if (this.keydown.UP && !this.keydown.DOWN) {\n      this.up();\n    } else if (this.keydown.DOWN && !this.keydown.UP) {\n      this.down();\n    } else {\n      this.vy *= 0.7;\n    }\n\n    this.x += this.vx;\n\n    for (const obs of game.obstacles) {\n      if (!(obs instanceof Trapdoor) && isCollidingRectEntities(this, obs)) {\n        this.x -= this.vx;\n        this.vx = 0;\n      }\n    }\n\n    this.y += this.vy;\n\n    for (const obs of game.obstacles) {\n      if (!(obs instanceof Trapdoor) && isCollidingRectEntities(this, obs)) {\n        this.y -= this.vy;\n        this.vy = 0;\n      }\n    }\n\n    this.calculateCollisions();\n    calculateCursorCoords();\n  }\n\n  left() {\n    if (this.vx > -this.maxSpeed) {\n      this.vx -= 1;\n    } else {\n      this.vx = -this.maxSpeed;\n    }\n    this.texture = playerLeftWalking;\n  }\n\n  right() {\n    if (this.vx < this.maxSpeed) {\n      this.vx += 1;\n    } else {\n      this.vx = this.maxSpeed;\n    }\n    this.texture = playerRightWalking;\n  }\n\n  up() {\n    if (this.vy > -this.maxSpeed) {\n      this.vy -= 1;\n    } else {\n      this.vy = -this.maxSpeed;\n    }\n    this.texture = playerBack;\n  }\n\n  down() {\n    if (this.vy < this.maxSpeed) {\n      this.vy += 1;\n    } else {\n      this.vy = this.maxSpeed;\n    }\n    this.texture = playerFrontWalking;\n  }\n\n  punch() {\n    removeIf(game.enemies, enemy => {\n      const isColliding = isCollidingCircle(\n        cursorX,\n        cursorY,\n        32,\n        enemy.x,\n        enemy.y,\n        enemy.radius\n      );\n      if (isColliding) enemy.kill(game);\n      return isColliding;\n    });\n  }\n\n  shoot(vector) {\n    const [centerX, centerY] = entityCenter(this);\n    game.bullets.push(new Bullet(centerX, centerY, vector, \"player\"));\n    this.weapon = \"fist\";\n    game.weapons.push(\n      new Weapon(centerX - this.width / 4, centerY - this.height / 4, false)\n    );\n  }\n}\n\nexport function calculateVector(x1, y1, x2, y2) {\n  const xDist = x2 - x1;\n  const yDist = y2 - y1;\n  const ratio = 1 / Math.sqrt(xDist ** 2 + yDist ** 2);\n  return [xDist * ratio, yDist * ratio];\n}\n\ncanvas.addEventListener(\"click\", function(e) {\n  if (game.player.weapon === \"fist\") {\n    if (game.player.punchCoolDown > PUNCH_COOL_DOWN) {\n      game.player.punch();\n      game.player.punchCoolDown = 0;\n    }\n  } else {\n    const [playerX, playerY] = entityCenter(game.player);\n    const vector = calculateVector(playerX, playerY, e.offsetX, e.offsetY);\n    game.player.shoot(vector);\n  }\n});\n\ndocument.addEventListener(\"keydown\", function(e) {\n  switch (e.code) {\n    case \"KeyA\":\n    case \"ArrowLeft\":\n      game.player.keydown.LEFT = true;\n      break;\n\n    case \"KeyW\":\n    case \"ArrowUp\":\n      game.player.keydown.UP = true;\n      break;\n\n    case \"KeyD\":\n    case \"ArrowRight\":\n      game.player.keydown.RIGHT = true;\n      break;\n\n    case \"KeyS\":\n    case \"ArrowDown\":\n      game.player.keydown.DOWN = true;\n      break;\n\n    default:\n      return;\n  }\n});\n\ndocument.addEventListener(\"keyup\", function(e) {\n  switch (e.code) {\n    case \"KeyA\":\n    case \"ArrowLeft\":\n      game.player.keydown.LEFT = false;\n      break;\n\n    case \"KeyW\":\n    case \"ArrowUp\":\n      game.player.keydown.UP = false;\n      break;\n\n    case \"KeyD\":\n    case \"ArrowRight\":\n      game.player.keydown.RIGHT = false;\n      break;\n\n    case \"KeyS\":\n    case \"ArrowDown\":\n      game.player.keydown.DOWN = false;\n      break;\n\n    default:\n  }\n});\n\nlet cursorX = 0;\nlet cursorY = 0;\n\nfunction calculateCursorCoords() {\n  if (game.player.weapon === \"fist\") {\n    const [playerX, playerY] = entityCenter(game.player);\n    const xDist = mouseX - playerX;\n    const yDist = mouseY - playerY;\n    const distance = Math.sqrt(xDist ** 2 + yDist ** 2);\n    if (distance > 64) {\n      const ratio = 64 / distance;\n      cursorX = playerX + xDist * ratio;\n      cursorY = playerY + yDist * ratio;\n      return;\n    }\n  }\n  cursorX = mouseX;\n  cursorY = mouseY;\n}\n\nlet mouseX = 0;\nlet mouseY = 0;\n\ncanvas.addEventListener(\"mousemove\", event => {\n  mouseX = event.offsetX;\n  mouseY = event.offsetY;\n  calculateCursorCoords();\n});\n\nconst fist = loadImage(require(\"./art/itsafist.png\"));\nconst gun = loadImage(require(\"./art/itsthegun.png\"));\n/** @param {CanvasRenderingContext2D} c */\nfunction drawCursor(c) {\n  if (game.player.weapon === \"fist\") {\n    c.drawImage(fist, cursorX - 6, cursorY - 6, 12, 12);\n    if (game.player.punchCoolDown < PUNCH_COOL_DOWN) {\n      c.fillStyle = \"rgba(0, 0, 0, .5)\";\n      c.fillRect(cursorX - 6, cursorY - 6, 12, 12);\n    }\n  } else {\n    c.drawImage(gun, cursorX - 8, cursorY - 2, 16, 4);\n  }\n}\n\nconst endscreenImage = loadImage(require(\"./art/endscreen.jpg\"));\n\nfunction draw() {\n  if (win) {\n    c.drawImage(endscreenImage, 0, 0, canvas.width, canvas.height);\n    return;\n  }\n\n  game.player.update();\n\n  const prespeed =\n    Math.sqrt(\n      game.player.vx * game.player.vx + game.player.vy * game.player.vy\n    ) + 0.5;\n\n  game.speed = 120 / prespeed;\n\n  c.fillStyle = `rgba(0, 0, 0, ${(1 / game.speed) * 15})`;\n  c.fillRect(0, 0, canvas.width, canvas.height);\n\n  for (const entity of [\n    ...game.obstacles,\n    ...game.weapons,\n    ...game.enemies,\n    ...game.bullets,\n    ...game.particles\n  ]) {\n    entity.draw(c);\n  }\n\n  game.player.draw(c);\n\n  if (game.player.weapon === \"fist\") {\n    c.beginPath();\n    c.fillStyle = \"darkred\";\n    c.arc(mouseX, mouseY, 5, 0, 2 * Math.PI);\n    c.fill();\n  }\n\n  drawCursor(c);\n\n  requestAnimationFrame(draw);\n}\n\nclass Gamestate {\n  constructor() {\n    this.player = new Player();\n    this.speed = 1;\n    this.currentLevel = 0;\n    this.enemies = [];\n    this.obstacles = [];\n    this.weapons = [];\n    this.bullets = [];\n    this.particles = [];\n    this.levels = [];\n    this.entranceX = 0;\n    this.entranceY = 0;\n  }\n\n  newObstacles(layout) {\n    this.obstacles = [];\n\n    layout.forEach((row, y) => {\n      row.forEach(([type, entity], x) => {\n        switch (type) {\n          case \"noop\":\n            break;\n          case \"entrance\":\n            this.entranceX = x * TILE_SIZE;\n            this.entranceY = y * TILE_SIZE;\n            break;\n          case \"enemy\":\n            this.enemies.push(new entity(x * TILE_SIZE, y * TILE_SIZE));\n            break;\n          case \"obstacle\":\n            this.obstacles.push(new entity(x * TILE_SIZE, y * TILE_SIZE));\n            break;\n          default:\n            console.error(\"unknown map entity type:\", type);\n        }\n      });\n    });\n  }\n\n  update() {\n    for (const entity of [\n      ...this.enemies,\n      ...this.bullets,\n      ...this.particles\n    ]) {\n      if (entity.update) entity.update(game);\n    }\n  }\n  loop() {\n    if (win) return;\n    game.update();\n    setTimeout(game.loop, game.speed);\n  }\n}\n\nconst game = new Gamestate();\n\nwindow.game = game;\n\ngame.weapons.push(new Weapon(64, 64, true));\n\n{\n  // new scope so we don't accidentally use these one-off variables\n  const _ = [\"noop\"];\n  const e = [\"entrance\"];\n  const c = [\"obstacle\", Crate];\n  const b = [\"obstacle\", Bookshelf];\n  const f = [\"obstacle\", FireBarrel];\n  const w = [\"obstacle\", Wall];\n  const t = [\"obstacle\", Trapdoor];\n  const h = [\"enemy\", Crachead];\n  const g = [\"enemy\", GuyThatShootsYou];\n\n  game.levels.push(\n    [\n      [h, _, _, _, w, _, _, _, _, _, _, _],\n      [_, _, _, _, _, _, _, _, _, _, _, _],\n      [_, _, _, _, _, _, _, _, _, _, _, _],\n      [_, _, _, _, _, _, _, _, _, _, _, _],\n      [_, _, _, _, e, _, _, _, _, _, _, _],\n      [c, _, _, _, _, _, f, _, _, _, t, _],\n      [_, _, _, _, _, _, _, _, _, _, _, _],\n      [_, _, _, _, _, _, _, _, _, _, _, _],\n      [_, _, _, _, _, _, _, _, _, _, _, _],\n      [_, _, _, _, _, _, _, b, _, _, _, _],\n      [_, _, _, _, _, _, _, _, _, _, _, _],\n      [_, _, _, _, _, _, _, _, _, _, _, _]\n    ],\n\n    [\n      [_, _, _, _, w, _, _, _, _, _, _, _],\n      [_, _, _, _, _, _, _, _, _, g, _, _],\n      [_, _, f, _, _, _, _, _, _, _, _, _],\n      [_, _, _, _, w, _, c, _, _, _, _, _],\n      [e, _, _, _, _, _, _, _, _, _, _, _],\n      [_, _, _, _, _, _, _, _, _, _, _, _],\n      [_, _, _, _, _, _, _, _, _, _, _, _],\n      [_, _, _, _, _, _, _, _, _, _, _, t],\n      [_, _, _, _, _, _, _, _, _, _, _, _],\n      [_, _, _, _, w, _, h, g, _, f, _, _],\n      [_, _, h, _, _, _, _, _, _, _, _, _],\n      [_, _, _, _, _, _, _, _, _, _, _, _]\n    ],\n\n    [\n      [_, _, _, _, _, _, _, _, _, _, _, _],\n      [_, g, _, _, _, _, _, _, _, _, g, _],\n      [_, _, c, _, _, _, _, c, _, _, _, _],\n      [_, _, _, _, _, _, _, _, _, _, _, _],\n      [t, _, _, _, _, _, _, _, _, _, _, _],\n      [_, _, _, _, _, h, h, _, _, _, _, _],\n      [_, _, _, _, _, h, h, _, _, _, _, _],\n      [_, _, c, _, _, _, _, c, _, _, _, e],\n      [_, _, _, _, _, _, _, _, _, _, _, _],\n      [_, _, _, _, _, _, _, _, _, _, _, _],\n      [_, g, _, _, _, _, _, _, _, _, _, _],\n      [_, _, _, _, _, _, _, _, _, _, _, _]\n    ],\n\n    [\n      [_, _, _, _, f, _, _, _, _, _, _, _],\n      [_, _, _, _, _, _, _, _, _, g, _, _],\n      [_, _, _, w, b, _, _, _, _, _, _, _],\n      [_, _, h, _, _, _, _, _, _, _, _, _],\n      [e, _, _, _, _, _, _, _, _, _, _, _],\n      [_, _, _, w, _, _, _, h, _, _, g, _],\n      [_, _, h, _, _, _, _, _, _, _, _, _],\n      [_, _, _, _, _, _, _, _, _, f, _, t],\n      [_, _, _, _, _, _, _, _, _, _, _, _],\n      [_, f, _, _, _, _, _, g, _, _, _, _],\n      [_, _, _, _, _, _, _, _, _, _, _, _],\n      [_, _, _, _, _, _, _, _, _, _, _, _]\n    ],\n\n    [\n      [_, _, _, _, _, _, _, _, _, _, _, _],\n      [_, _, _, _, _, _, _, _, _, _, _, _],\n      [_, _, _, _, _, _, _, _, _, _, _, _],\n      [_, _, _, h, h, h, h, h, h, _, _, _],\n      [t, _, _, h, _, _, _, _, h, _, _, _],\n      [_, _, _, h, _, f, f, _, h, _, _, _],\n      [_, _, _, h, _, f, f, _, h, _, _, _],\n      [_, _, _, h, _, _, _, _, h, _, _, e],\n      [_, _, _, h, h, h, h, h, h, _, _, _],\n      [_, _, _, _, _, _, _, _, _, _, _, _],\n      [_, _, _, _, _, _, _, _, _, _, _, _],\n      [_, _, _, _, _, _, _, _, _, _, _, _]\n    ],\n\n    [\n      [c, _, _, c, _, _, c, _, _, c, _, _],\n      [_, _, _, _, _, _, _, _, _, _, _, _],\n      [_, _, _, _, _, _, _, _, _, _, _, _],\n      [b, _, _, _, b, _, _, _, b, _, _, _],\n      [e, _, _, _, _, _, _, _, _, _, _, _],\n      [_, _, _, _, h, h, h, h, h, _, g, _],\n      [_, _, _, _, h, h, h, h, h, g, _, _],\n      [_, _, _, _, _, _, _, _, _, _, _, t],\n      [b, _, _, _, b, _, _, _, b, _, _, _],\n      [c, _, _, c, _, _, c, _, _, c, _, _],\n      [_, _, _, _, _, _, _, _, _, _, _, _],\n      [_, _, _, _, _, _, _, _, _, _, _, _]\n    ]\n  );\n}\n\nconst titleImage = loadImageNow(require(\"./art/title.jpg\"));\nconst explainImage = loadImageNow(require(\"./art/explain.jpg\"));\n\ntitleImage.then(titleImgLoaded => {\n  let startImage = \"title\";\n  c.drawImage(titleImgLoaded, 0, 0, canvas.width, canvas.height);\n\n  canvas.addEventListener(\"click\", async function listener() {\n    switch (startImage) {\n      case \"title\":\n        startImage = \"explain\";\n        const explainImgLoaded = await explainImage;\n        c.drawImage(explainImgLoaded, 0, 0, canvas.width, canvas.height);\n        break;\n      case \"explain\":\n        canvas.removeEventListener(\"click\", listener);\n        await startGame();\n        break;\n    }\n  });\n});\n\nasync function startGame() {\n  await Promise.all(images);\n  requestAnimationFrame(draw);\n  game.loop();\n  game.player.respawn();\n}\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else {\n        window.location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}